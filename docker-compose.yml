services:
  server:
    build:
      context: .
      dockerfile: server/Dockerfile
    container_name: gmod_tcp_server
    restart: unless-stopped
    ports:
      - "9060:9060"
      - "25565:25565"
    environment:
      - HOST=${HOST:-0.0.0.0}
      - PORT=${PORT:-25565}
      - API_HOST=${API_HOST:-0.0.0.0}
      - API_PORT=${API_PORT:-9060}
      - ALLOWED_ORIGINS=${ALLOWED_ORIGINS:-*}
      - API_PASSWORDS=${API_PASSWORDS:-}
      - RUST_LOG=${RUST_LOG:-info}
    volumes:
      - ./server/data:/app/data
    networks:
      - gmod_network

networks:
  gmod_network:
    driver: bridge

